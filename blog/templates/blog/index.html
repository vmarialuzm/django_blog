{% extends "base.html" %}

{% block content %} 
<h1 class="text-center">Lista de Posts</h1>
<br>
<div class="row text-center">
  {% for post in posts %}
    <div class="col-4">
      <figure>
        <blockquote class="blockquote">
          <span>{{ post.id }}</span>
          <p>{{ post.title }}</p>
        </blockquote>
        <figcaption class="blockquote-footer">
          {{ post.user }}
        </figcaption>

        <!-- Conteo de likes y dislikes -->
        
        <span>{{ post.liked_by.count }}</span> Likes
        <span>{{ post.disliked_by.count }}</span> Dislikes
        <br>
        <a class="btn btn-warning" href="{% url 'like_post' post.id %}" class="btn btn-danger">Likes</a>
        <a class="btn btn-warning" href="{% url 'disliked_post' post.id %}" class="btn btn-danger">Dislikes</a>
        
        <br>
        <a href="{% url 'post_update' post.id %}">Actualizar</a>

        {% if user.id == post.user_id %}
          <form method="POST" action="{% url 'post_delete' post.id %}">
            {% csrf_token %}
            <input type="submit" value="Eliminar">
          </form>
        {% endif %}
        
        <a class="link-secondary link-offset-2 link-offset-3-hover link-underline link-underline-opacity-0 link-underline-opacity-75-hover" href="{% url 'post_details' post.id %}">
          Ver m√°s
          <i class="bi bi-arrow-right"></i>
        </a>
      </figure>
    </div>
  {% endfor %}
</div>


{% endblock content %}